<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Best Practices - Andersen Lab Dry Guide</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../css/version-select.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Best Practices";
        var mkdocs_page_input_path = "knowledge_base/best_practices.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> Andersen Lab Dry Guide
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Home</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../..">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Knowledge Base</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Best Practices</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#general">General</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#r">R</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#rockfish">Rockfish</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#quest">QUEST</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#python">Python</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../r/">R</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../shiny/">R Shiny</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../bash/">Command Line</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../github/">Git and Github</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Rockfish</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../rockfish/rf-intro/">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../rockfish/VAST/">Data on Rockfish</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../rockfish/rf-nextflow/">Nextflow</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../rockfish/rf-conda/">Conda</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Quest</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../quest/quest-intro/">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../quest/b1059/">Data on b1059</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../quest/quest-nextflow/">Nextflow</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../quest/quest-conda/">Conda</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../quest/quest-docker/">Docker</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../pipeline-GCPconfig/">GCP</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">WI Sequencing pipelines</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../pipelines/pipeline-overview/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../pipelines/pipeline-trimming/">trim-fq-nf</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../pipelines/pipeline-alignment/">alignment-nf</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../pipelines/pipeline-wiGATK/">wi-gatk</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../pipelines/pipeline-concordance/">concordance-nf</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../pipelines/pipeline-postGATK/">post-gatk-nf</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../pipelines/pipeline-impute/">imputation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../pipelines/pipeline-annotation-nf/">annotation-nf</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Other pipelines</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../pipelines/pipeline-nemascan/">NemaScan</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../pipelines/pipeline-cellprofiler/">Image Analysis</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../pipelines/pipeline-nil-ril/">nil-ril-nf</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../pipelines/pipeline-genomes-nf/">genomes-nf</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Other things</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="../../other/cendr.md">CeNDR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../other/backup/">Backup</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../other/sra/">SRA</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../other/cloud/">Cloud</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../other/sharing-globus/">Globus file sharing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../other/writing-nextflow/">Writing Nextflow workflows</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../other/labsite/">Andersen Labsite</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">Andersen Lab Dry Guide</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Knowledge Base</li>
      <li class="breadcrumb-item active">Best Practices</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/Andersenlab/dry-guide/edit/master/docs/knowledge_base/best_practices.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h2 id="andersen_lab_coding_best_practices">Andersen Lab Coding Best Practices<a class="headerlink" href="#andersen_lab_coding_best_practices" title="Permanent link">&para;</a></h2>
<p>These best practices are just a few of the important coding tips and tricks for reproducible research. If you have more ideas, contact Mike!</p>
<h3 id="general">General<a class="headerlink" href="#general" title="Permanent link">&para;</a></h3>
<ul>
<li>You should be doing most (if not all) of your analyses in <code>/Volumes/vast/projects/YourName</code> (this requires having mapped VAST to your computer. See <a href="/rockfish/vast.md">here</a> for instructions)<ul>
<li>This is (1) to make sure the data is backed up/saved with version history and (2) to allow other lab members to access your code/scripts when necessary</li>
</ul>
</li>
<li>Do <strong>NOT</strong> use spaces, quotation marks, or brackets in names of files or folders. Try not to use these characters in column names either (although sometimes it is necessary for a final table output)<ul>
<li>Computers often have a hard time reading spaces and code used to ignore spaces can vary from program to program</li>
<li>Instead, you can use <code>_</code> or <code>.</code> or <code>-</code> or capitalization (<code>fileName.txt</code>)</li>
</ul>
</li>
<li><strong>NEVER</strong> replace raw data!!!!!<ul>
<li>You should save your raw data in the rawest format, write a script to analyze it then if you wish, save the processed data for further use. This is important because it always allows you to go back to the original raw data in case something happens</li>
<li>Some suggested project folder structures might look like something below:
<img alt="directory_structure" src="../../img/directory_structure.png" /></li>
</ul>
</li>
<li>Include a <code>README.md</code> (or <code>README.txt</code>) file in each project folder to explain where the data and scripts can be found for certain analyses. Trust me, after a few years you will definitely forget…<ul>
<li>And don’t forget to update the <code>README</code> regularly, an old <code>README</code> doesn’t do anyone good!</li>
</ul>
</li>
<li>Either use full path names in scripts or be explicit about where the working directory is<ul>
<li>This is important to allow other people to run your code (or might even be helpful for you if you ever reorganize folders one day)</li>
</ul>
</li>
<li>Date your files, especially when you update an existing file. Write dates in <code>YYYYMMDD</code> format</li>
<li>As much as possible, ensure that your processed data is “tidy” (see below). This doesn’t work for all complex data types, but it should be a general norm to follow.<ul>
<li>Each variable must have its own column</li>
<li>Each observation must have its own row</li>
<li>Each value must have its own cell</li>
<li>No color or highlighting </li>
<li>No empty cells (fill with <code>NA</code> if necessary)</li>
<li>Save data as plain text files (<code>.csv</code>, <code>.tsv</code>, <code>.txt</code> etc. -- NOT <code>.xls</code>!!!)</li>
</ul>
</li>
</ul>
<h3 id="r">R<a class="headerlink" href="#r" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>ALWAYS</strong> use namespaces before functions from packages (i.e. <code>dplyr::filter()</code> instead of <code>filter()</code>)<ul>
<li>This includes <code>ggplot2</code> and especially <code>dplyr</code>!!!</li>
<li>Some packages have functions with the same name, so adding a namespace is crucial for reproducibility.</li>
<li>Also, this helps other people read your code by knowing which functions came from which packages</li>
</ul>
</li>
<li>When piping with Tidyverse (<code>%&gt;%</code>), press <code>&lt;Enter&gt;</code> to go to the next line after a pipe<ul>
<li>This makes your code more readable </li>
<li>In fact, general practices state no more than 80-100 characters per line of code EVER to increase readability</li>
</ul>
</li>
</ul>
<h3 id="rockfish">Rockfish<a class="headerlink" href="#rockfish" title="Permanent link">&para;</a></h3>
<ul>
<li>You should be doing most (if not all) of your analyses in <code>/vast/eande106/projects/yourName</code> (not your home directory (i.e. <code>/home/&lt;jheid&gt;</code>))</li>
</ul>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Main exception: Nextflow temporary working directories should NOT be on <code>/vast/eande106</code> but rather in the scratch space <code>/scratch4/eande106/</code> (files get automatically deleted here periodically).
A correctly setup <a href="../../rockfish/rf-nextflow/">bash profile</a> file will take care of this.</p>
</div>
<h3 id="quest">QUEST<a class="headerlink" href="#quest" title="Permanent link">&para;</a></h3>
<ul>
<li>You may still be doing some of your analyses in <code>/projects/b1059/projects/yourName</code> (not your home directory (i.e. <code>/home/netid</code>))</li>
</ul>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Main exception: Nextflow temporary working directories should NOT be on <code>b1059</code> (it will fill us up!) but rather in the scratch space <code>b1042</code> (files get automatically deleted here every 30 days).
A correctly designed <a href="../../quest/quest-nextflow/">nextflow.config</a> file will take care of this.</p>
</div>
<h3 id="python">Python<a class="headerlink" href="#python" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>ALWAYS</strong> indent using spaces. Mixing spaces and tabs will case your script to fail</li>
<li>Use clear and descriptive variable names<ul>
<li>The names should help someone reading the code track the logic of the coder</li>
<li>Only use alphanumeric characters or underscores</li>
<li>Never start a name with a number</li>
</ul>
</li>
<li>Comment as much as you can to help others (and future you) understand what each part of the code is for</li>
<li>Make logical blocks of code into functions<ul>
<li>This helps with interpretation</li>
<li>Anything that is done more than once should be a function</li>
</ul>
</li>
<li>Try to follow <a href="https://peps.python.org/pep-0008/">PEP8</a> style rules</li>
</ul>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../.." class="btn btn-neutral float-left" title="Overview"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../r/" class="btn btn-neutral float-right" title="R">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/Andersenlab/dry-guide" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../.." style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../r/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
      <script src="../../js/version-select.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
