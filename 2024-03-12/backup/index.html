<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Backup - Andersen Lab Dry Guide</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/version-select.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Backup";
        var mkdocs_page_input_path = "backup.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Andersen Lab Dry Guide
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Knowledge Base</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../best_practices/">Best Practices</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../r/">R</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../shiny/">R Shiny</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../bash/">Command Line</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../github/">Git and Github</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Rockfish</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../rf-intro/">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../VAST/">Data on Rockfish</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../rf-nextflow/">Nextflow</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../rf-conda/">Conda</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Quest</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../quest-intro/">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../b1059/">Data on b1059</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../quest-nextflow/">Nextflow</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../quest-conda/">Conda</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../pipeline-docker/">Docker</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../pipeline-GCPconfig/">GCP</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">WI Sequencing pipelines</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../pipeline-overview/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../pipeline-trimming/">trim-fq-nf</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../pipeline-alignment/">alignment-nf</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../pipeline-wiGATK/">wi-gatk</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../pipeline-concordance/">concordance-nf</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../pipeline-postGATK/">post-gatk-nf</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../pipeline-impute/">imputation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../pipeline-annotation-nf/">annotation-nf</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Other pipelines</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../pipeline-nemascan/">NemaScan</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../pipeline-cellprofiler/">Image Analysis</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../pipeline-nil-ril/">nil-ril-nf</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../pipeline-genomes-nf/">genomes-nf</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../pipeline-cegwas/">cegwas2-nf</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Other things</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../cendr/">CeNDR</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">Backup</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#backup_files_to_google_cloud">Backup files to google cloud</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#local_backup">Local Backup</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#adding_fastq_to_sra_project">Adding FASTQ to SRA project</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cloud/">Cloud</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../sharing-globus/">Globus file sharing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../labsite/">Andersen Labsite</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Andersen Lab Dry Guide</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Other things</li>
      <li class="breadcrumb-item active">Backup</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/Andersenlab/dry-guide/edit/master/docs/backup.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="backup_data">Backup data<a class="headerlink" href="#backup_data" title="Permanent link">&para;</a></h1>
<h2 id="backup_files_to_google_cloud">Backup files to google cloud<a class="headerlink" href="#backup_files_to_google_cloud" title="Permanent link">&para;</a></h2>
<p><strong>1. Download and setup google cloud SDK - only need to do once</strong></p>
<pre><code># download from google
curl -O https://dl.google.com/dl/cloudsdk/channels/rapid/downloads/google-cloud-sdk-325.0.0-linux-x86_64.tar.gz

# un-tar
tar -xf google-cloud-sdk-325.0.0-linux-x86_64.tar.gz

# add to path
./google-cloud-sdk/install.sh

# initialize and authenticate
gcloud init

# follow prompts
</code></pre>
<p><strong>2. Add files from QUEST folder to google cloud bucket</strong></p>
<p>You can see the structure of the google buckets by going <a href="https://console.cloud.google.com/storage/browser?authuser=1&amp;project=andersen-lab&amp;prefix=">here</a>. Most things are currently in the <code>elegansvariation.org</code> bucket.</p>
<pre><code># copy all files in current directory to specified bucket
gsutil cp * gs://&lt;YOUR_BUCKET_NAME&gt;

# copy all files in parallel (good for multiple files)
gsutil -m cp * gs://&lt;YOUR_BUCKET_NAME&gt;

# view list of files in bucket
gsutil ls gs://&lt;YOUR_BUCKET_NAME&gt;

# example - move all vcf files to the variation folder under 20210121 release
gsutil -m cp * gs://elegansvarition.org/releases/20210121/variation
</code></pre>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We store <code>.bam</code> and <code>.vcf</code> files on google because they are used by CeNDR. The <code>.bam</code> files are not separated by release but the <code>.vcf</code> files (and accompanying files for a CeNDR release) are.</p>
</div>
<h2 id="local_backup">Local Backup<a class="headerlink" href="#local_backup" title="Permanent link">&para;</a></h2>
<p>We also store all <code>.fastq</code> files locally in duplicate. If anything ever happens to any downstream data we can always recreate it with the original FASTQ files. <strong>This step is extremely important</strong>.</p>
<p>A list of all data and which hardrive it is backed up on can be found <a href="https://docs.google.com/spreadsheets/d/16jlaDIRPNu0jnVCg395goF9B70UP1skXdrWO6bWrwrA/edit?usp=sharing">here</a>. The main copies of all data can be found on <strong>Pangolin, Armadillo, Raven, Karasu, and Turkey</strong></p>
<ol>
<li>Choose a hardrive that has enough space for the data you need to back up and plug it in to your computer</li>
<li>Change directories on your local computer into the hardrive <code>cd /Volumes/{name_of_harddrive}/{path}</code></li>
<li>Sync data from QUEST with <code>Rsync -avh &lt;netid&gt;@quest.northwestern.edu:&lt;path_to_folder_quest&gt; .</code>. <em>Don't forget the '.'!!!</em></li>
<li>When finished, check that the total file size is the same on the hard drive and on QUEST, you can always re-run the Rsync command to verify it is complete.</li>
<li>Repeat with the second hard drive</li>
<li>Complete the <a href="https://docs.google.com/spreadsheets/d/16jlaDIRPNu0jnVCg395goF9B70UP1skXdrWO6bWrwrA/edit?usp=sharing">data backup google sheet</a> with your new backup.</li>
</ol>
<h2 id="adding_fastq_to_sra_project">Adding FASTQ to SRA project<a class="headerlink" href="#adding_fastq_to_sra_project" title="Permanent link">&para;</a></h2>
<p>Checkout this <a href="../sra/">guide</a> for how to upload data to SRA. This should be done with wild isolate FASTQ files after each new CeNDR release. The SRA submission ID might need to be cited in publications.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../cendr/" class="btn btn-neutral float-left" title="CeNDR"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../cloud/" class="btn btn-neutral float-right" title="Cloud">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/Andersenlab/dry-guide" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../cendr/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../cloud/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
      <script src="../js/version-select.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
