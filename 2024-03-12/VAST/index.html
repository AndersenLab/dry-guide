<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Data on Rockfish - Andersen Lab Dry Guide</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/version-select.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Data on Rockfish";
        var mkdocs_page_input_path = "VAST.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Andersen Lab Dry Guide
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Knowledge Base</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../best_practices/">Best Practices</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../r/">R</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../shiny/">R Shiny</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../bash/">Command Line</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../github/">Git and Github</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Rockfish</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../rf-intro/">Introduction</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">Data on Rockfish</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#analysis_eande106_data">analysis (eande106_data)</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#software_eande106_data">software (eande106_data)</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#data_vast">data (vast)</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#docs_vast">docs (vast)</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#projects_vast">projects (vast)</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#to_be_deleted_vast">to_be_deleted (vast)</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#workflows_vast">workflows (vast)</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../rf-nextflow/">Nextflow</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../rf-conda/">Conda</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Quest</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../quest-intro/">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../b1059/">Data on b1059</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../quest-nextflow/">Nextflow</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../quest-conda/">Conda</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../pipeline-docker/">Docker</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../pipeline-GCPconfig/">GCP</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">WI Sequencing pipelines</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../pipeline-overview/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../pipeline-trimming/">trim-fq-nf</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../pipeline-alignment/">alignment-nf</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../pipeline-wiGATK/">wi-gatk</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../pipeline-concordance/">concordance-nf</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../pipeline-postGATK/">post-gatk-nf</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../pipeline-impute/">imputation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../pipeline-annotation-nf/">annotation-nf</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Other pipelines</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../pipeline-nemascan/">NemaScan</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../pipeline-cellprofiler/">Image Analysis</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../pipeline-nil-ril/">nil-ril-nf</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../pipeline-genomes-nf/">genomes-nf</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../pipeline-cegwas/">cegwas2-nf</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Other things</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../cendr/">CeNDR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../backup/">Backup</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cloud/">Cloud</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../sharing-globus/">Globus file sharing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../labsite/">Andersen Labsite</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Andersen Lab Dry Guide</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Rockfish</li>
      <li class="breadcrumb-item active">Data on Rockfish</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/Andersenlab/dry-guide/edit/master/docs/VAST.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="data_storage_on_rockfish">Data storage on Rockfish<a class="headerlink" href="#data_storage_on_rockfish" title="Permanent link">&para;</a></h1>
<div class="toc">
<ul>
<li><a href="#data_storage_on_rockfish">Data storage on Rockfish</a><ul>
<li><a href="#analysis_eande106_data">analysis (eande106_data)</a></li>
<li><a href="#software_eande106_data">software (eande106_data)</a></li>
<li><a href="#data_vast">data (vast)</a></li>
<li><a href="#docs_vast">docs (vast)</a></li>
<li><a href="#projects_vast">projects (vast)</a></li>
<li><a href="#to_be_deleted_vast">to_be_deleted (vast)</a></li>
<li><a href="#workflows_vast">workflows (vast)</a></li>
</ul>
</li>
</ul>
</div>
<p>In 2023, the Andersen lab began moving its computing resources from QUEST at Northwestern to Rockfish at Johns Hopkins. The goal was to have a seamless transition by maintaining the file system and structure in Rockfish as similar as possible to QUEST.</p>
<p>The primary file system that the Andersen lab uses in Rockfish is called VAST. The VAST partition purchased by the lab has a file quota of 120TB. In addition, the lab has access to two secondary partitions: <code>data_eande106</code> and <code>scr4_eande106</code>, with file quotas of 10TB and 1TB respectively. Once granted access to the Andersen lab security group and allocation, you will find symbolic links for <code>vast</code>, <code>data</code>, and <code>scr4</code> partitions attached to your home directory (e.g. <code>/home/&lt;user&gt;/vast</code>). Symbolic links act like shortcuts that will allow you to access all partitions without having to use intricate file paths that point to the true location of the partitions in the Rockfish file system.</p>
<p><code>vast</code> is where the <em>vast</em> (hehe, get it?) majority of files will exist. A breakdown of the directories of this partition is described below. Files stored in <code>vast</code> cannot have special characters (e.g. !@#$^&amp;*()?:;) and have a few protected directory names that are not allowed (e.g. <code>aux</code>, <code>prn</code>, <code>con</code>)</p>
<p><code>data_eande106</code> is where software and pipelines will live. Software and pipeline files often contain special characters (e.g. packages with <code>::</code> delimiters) or directories with protected names. Any future software must be installed here. A breakdown of the directories of this partition is described below.</p>
<p><code>scr4_eande106</code> is a small partition primarily used for scratch space. It's currently empty, and it's supposed to be used only to hold small test files and scripts, with the aim to eventually delete such test files and reuse this space.**</p>
<h3 id="analysis_eande106_data">analysis (eande106_data)<a class="headerlink" href="#analysis_eande106_data" title="Permanent link">&para;</a></h3>
<p>This directory contains non-data output and analyses from general lab pipelines (i.e. <code>wi-gatk</code> or <code>alignment-nf</code>). It is organized by pipeline and then by analysis type-date. <strong>If you are running these pipelines (including <code>nil-ril-nf</code>) it is important that you move your analysis folder here once complete (and out of your personal folder) so that everyone has access to the results.</strong></p>
<h3 id="software_eande106_data">software (eande106_data)<a class="headerlink" href="#software_eande106_data" title="Permanent link">&para;</a></h3>
<p><strong>General</strong>
This is a great location to download any software tools or packages that you need to use that you cannot access with Quest or create a conda environment for. Especially important if they are software packages that other people in the lab might also use, as it is a shared space.</p>
<p><strong>Conda environments</strong></p>
<p>Inside the directory <code>conda_envs</code> you can find all the shared lab conda environments necessary for running certain nextflow pipelines. If you create a shared conda environment, <strong>it is important that you update the <code>README.md</code> with the code you used to create the environment for reproducible purposes</strong>. You can create a conda environment in this directory with:</p>
<pre><code>conda create -p /home/&lt;user&gt;/data_eande106/software/conda_envs/&lt;name_of_env&gt;
</code></pre>
<p>You can also update your <code>~/.condarc</code> file to point to this directory so that you can easily load conda environments just by the name (i.e. <code>source activate nf20_env</code> instead of <code>source activate /home/&lt;user&gt;/data_eande106/software/conda_envs/nf20_env</code>):</p>
<pre><code>channels:
  - conda-forge
  - bioconda
  - defaults

auto_activate_base: false

envs_dirs:
  - ~/.conda/envs/
  - /home/&lt;user&gt;/data_eande106/software/conda_envs/
</code></pre>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>It is very important that you do <strong>not</strong> update any packages or software while running a shared conda environment. This is especially an issue with Nextflow and the <code>nf20_env</code> environment. Updating nextflow whilie running this environment <strong>will update the version in the environment -- and it needs to be <code>v20.0</code> for many of the pipelines to run successfully</strong></p>
</div>
<p>If you want to see what all is loaded in a particular conda environment, or re-create an environment, you can use:</p>
<pre><code># make an exact copy 
conda create --clone py35 --name py35-2

# list all packages and versions
conda list --explicit &gt; bio-env.txt

# list a history of revisions
conda list --revisions

# go back to a previous revision
conda install --revision 2

# create environment from file
conda env create --file bio-env.txt

</code></pre>
<p>Also, check out this <a href="https://docs.conda.io/projects/conda/en/4.6.0/_downloads/52a95608c49671267e40c689e0bc00ca/conda-cheatsheet.pdf">cheat sheet</a> or our <a href="../quest-conda/">conda page</a> for more.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Most of the nextflow pipelines are written using <code>module load anaconda3/2022.05; source activate nf20_env</code>, so if you are having trouble running with conda, try loading the right environment first.</p>
</div>
<p><strong>R libraries</strong></p>
<p>Unfortunately, R doesn't seem to work very well with conda environments, and making sure everyone has the same version of several different R packages (specifically Tidyverse) can be a nightmare for software development. One way we have gotten around this is by installing the proper versions of R packages to a shared location (<code>/projects/b1059/software/R_lib_3.6.0</code>). Check out the <strong>Using R on Quest</strong> section of <a href="../r/">the R page</a> to learn more about installing a package to this folder and using it in a script.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>It is very important that you do <strong>not</strong> update any packages in this location unless absolutely necessary and proceed with extreme caution (especially if it is <code>tidyverse</code>!!!). Updating packages could break pipelines that rely on them.</p>
</div>
<p><strong>Docker images</strong></p>
<p>This is not available yet, but might be a good idea to store shared docker images here. <em>Note: can change the <code>singularity_cache</code> parameter in nextflow scripts to store images here in the future</em>.</p>
<h3 id="data_vast">data (vast)<a class="headerlink" href="#data_vast" title="Permanent link">&para;</a></h3>
<p>This directory contains all the lab data -- split by species. The goal is to create the same file structure across all species. This not only makes it easy to find the file you are looking for, but also makes it easy to script file locations. A general example of a species' file structure is below:</p>
<pre><code>├── genomes
│   ├── genetic_map
│   │   └──  {chr}.map
│   ├── {project_ID}
│   │   └──  {WS_build}
│   │       ├──  *.genome.fa*
│   │       ├──  csq
│   │       │    ├──  *.AA_Length.tsv
│   │       │    ├──  *.AA_Scores.tsv
│   │       │    └──  *.csq.gff3.gz
│   │       ├──  lcr
│   │       │    ├──  *.dust.bed.gz
│   │       │    └──  *.repeat_masker.bed.gz
│   │       └──  snpeff
│   │            ├──  {species}.{project}.{ws_build}
│   │            │   ├──  genes.gtf.gz
│   │            │   ├──  sequences.fa
│   │            │   └──  snpEffectPredictor.bin
│   │            └──  snpEff.config
│   └──  WI_PacBio_assemblies
├── RIL
│   ├── alignments
│   │   └──  {strain}.bam
│   ├── fastq 
│   │   └──  {strain}.*.fastq.gz
│   └── variation
│       └──  {project_analysis}
├── NIL
│   ├── alignments
│   │   └──  {strain}.bam
│   ├── fastq 
│   │   └──  {strain}.*.fastq.gz
│   └── variation
│       └──  {project_analysis}
├── WI
│   ├── alignments
│   │   ├──  _bam_not_for_cendr
│   │   └──  {strain}.bam
│   ├── concordance
│   │   └──  {cendr_release_date}
│   ├── divergent_regions
│   │   └──  {cendr_release_date}
│   ├── fastq 
│   │   ├──  dna
│   │   │   ├──  _fastq_not_for_cendr   
│   │   │   └──  {strain}.*.fastq.gz
│   │   └──  rna
│   │       └──  {project}
│   ├── haplotype
│   │   └──  {cendr_release_date}
│   ├── tree
│   │   └──  {cendr_release_date}
│   └── variation
│       └──  {cendr_release_date}
│           ├──  tracks   
│           └──  vcf
│               ├──  strain_vcf
│               │   └──  {strain}.{date}.vcf.gz
│               └──  WI.{date}.*.vcf.gz
└── {other - i.e. BSA, MUTANT, HiC, PacBio}
    └── *currently could look like anything in here - organized by project*

</code></pre>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This restructure is still not 100% complete and things might continue to change as we expand our genomes and data types. If you see something that is not organized well, let Erik or Nic know.</p>
</div>
<h3 id="docs_vast">docs (vast)<a class="headerlink" href="#docs_vast" title="Permanent link">&para;</a></h3>
<p>This directory should probably be removed and the docs inside stored elsewhere. Currently, shows the process for fastq SRA submission from 2019 and then again from 2021.</p>
<h3 id="projects_vast">projects (vast)<a class="headerlink" href="#projects_vast" title="Permanent link">&para;</a></h3>
<p>Projects is where most people will spend most of their time. Each user with access to quest should create a user-specific folder (named with their name) in the <code>projects</code> directory. Inside your folder, you can do all your work: analyzing data, writing new scripts, temporary storage, etc.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please be aware of how much space you are using in your personal folder. Of course some projects might require more space than others, and some projects require a lot of temporary space that can be deleted once completed. However, if you find that you have &gt; 500-1000 GB of used space in your folder, please take a look if there is any unused data or scripts. <strong>Either way, it is good practice to clean out your folder every few months to avoid storage pile-up.</strong> You can check how much space you are using with <code>du -hs *</code> or ask Katie.</p>
</div>
<h3 id="to_be_deleted_vast">to_be_deleted (vast)<a class="headerlink" href="#to_be_deleted_vast" title="Permanent link">&para;</a></h3>
<p>This directory is a temporary holding place for large files/data that can be deleted. Think of it as a soft-trash bin. If, after a few months of living in <code>to_be_deleted</code>, it is likely the data in fact can be deleted without being missed. This was a temporary solution for the large restructure in 2021 and can likely be removed in the future.</p>
<h3 id="workflows_vast">workflows (vast)<a class="headerlink" href="#workflows_vast" title="Permanent link">&para;</a></h3>
<p>This directory is being phased out. Workflows will now be hosted on GitHub and any lab members who wish to run a shared workflow should run remotely (if nextflow script) or clone the repo into their personal folders.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../rf-intro/" class="btn btn-neutral float-left" title="Introduction"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../rf-nextflow/" class="btn btn-neutral float-right" title="Nextflow">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/Andersenlab/dry-guide" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../rf-intro/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../rf-nextflow/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
      <script src="../js/version-select.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
